{% extends "base.html" %}

{% block content %}
    <h1>Resultat de la recherche pour "{{ search_term }}" </h1>
    

    {% if results %}
    {% for result in results %}
    <div class="search-result">
        <h2>{{ result.nom_gr or result.style or result.nom_art}} 
            <button class="favorite-button" data-id="{{ result.id_gr if result.nom_gr else result.id_style if result.style else result.id_art }}" data-type="{{ 'group' if result.nom_gr else 'style' if result.style else 'artist' }}">Favoris</button>    </div>
{% endfor %}
    {% else %}
        <p>Pas de r√©sultat trouve pour "{{ search_term }}".</p>
    {% endif %}


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.favorite-button').click(function() {
                var id = $(this).data('id');
                var type = $(this).data('type');
                var button = $(this);
        
                $.ajax({
    url: "/add_to_favorites",
    data: { 'id': id, 'type': type },
    type: 'POST',
    success: function(response) {
        console.log(response);
    },
    error: function(response) {
        console.log(response);
    }
});
            });
        });
    </script>
{% endblock %}